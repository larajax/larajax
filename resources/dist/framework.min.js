/*! For license information please see framework.min.js.LICENSE.txt */
(()=>{"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(){var e,t,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.toStringTag||"@@toStringTag";function s(n,o,i,a){var s=o&&o.prototype instanceof l?o:l,c=Object.create(s.prototype);return r(c,"_invoke",function(n,r,o){var i,a,s,l=0,c=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,a=0,s=e,d.n=n,u}};function p(n,r){for(a=n,s=r,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],p=d.p,h=i[2];n>3?(o=h===r)&&(s=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(a=0,d.v=r,d.n=i[1]):p<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,d.n=h,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,c,h){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),a=c,s=h;(t=a<2?e:s)||!f;){i||(a?a<3?(a>1&&(d.n=-1),p(a,s)):d.n=s:d.v=s);try{if(l=2,i){if(a||(o="next"),t=i[o]){if(!(t=t.call(i,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,a<2&&(a=0)}else 1===a&&(t=i.return)&&t.call(i),a<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=e}else if((t=(f=d.n<0)?s:n.call(r,d))!==u)break}catch(t){i=e,a=1,s=t}finally{l=1}}return{value:t,done:f}}}(n,i,a),!0),c}var u={};function l(){}function c(){}function f(){}t=Object.getPrototypeOf;var d=[][i]?t(t([][i]())):(r(t={},i,function(){return this}),t),p=f.prototype=l.prototype=Object.create(d);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,a,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=f,r(p,"constructor",f),r(f,"constructor",c),c.displayName="GeneratorFunction",r(f,a,"GeneratorFunction"),r(p),r(p,a,"Generator"),r(p,i,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(n=function(){return{w:s,m:h}})()}function r(e,t,n,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}r=function(e,t,n,o){function a(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?i?i(e,t,{value:n,enumerable:!o,configurable:!o,writable:!o}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},r(e,t,n,o)}function o(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}e.amdO={};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"loadCollection",value:(s=n().m(function e(){var t,r,o,i,a,s,l,c=this,f=arguments;return n().w(function(e){for(;;)switch(e.n){case 0:if(a=(null!==(t=(i=f.length>0&&void 0!==f[0]?f[0]:{}).js)&&void 0!==t?t:[]).filter(function(e){return!document.querySelector('head script[src="'.concat(u(e),'"]'))}),s=(null!==(r=i.css)&&void 0!==r?r:[]).filter(function(e){return!document.querySelector('head link[href="'.concat(u(e),'"]'))}),l=null!==(o=i.img)&&void 0!==o?o:[],a.length||s.length||l.length){e.n=1;break}return e.a(2);case 1:return e.n=2,Promise.all([this.loadJavaScript(a),Promise.all(s.map(function(e){return c.loadStyleSheet(e)})),this.loadImages(l)]);case 2:return e.a(2)}},e,this)}),l=function(){var e=this,t=arguments;return new Promise(function(n,r){var i=s.apply(e,t);function a(e){o(i,n,r,a,u,"next",e)}function u(e){o(i,n,r,a,u,"throw",e)}a(void 0)})},function(){return l.apply(this,arguments)})},{key:"loadStyleSheet",value:function(e){return new Promise(function(t,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=e,r.onload=function(){return t(r)},r.onerror=function(){return n(new Error("Failed to load CSS: ".concat(e)))},document.head.appendChild(r)})}},{key:"loadJavaScript",value:function(e){return e.reduce(function(e,t){return e.then(function(){return new Promise(function(e,n){var r=document.createElement("script");r.type="text/javascript",r.src=t,r.onload=function(){return e(r)},r.onerror=function(){return n(new Error("Failed to load JS: ".concat(t)))},document.head.appendChild(r)})})},Promise.resolve())}},{key:"loadImages",value:function(e){return e.length?Promise.all(e.map(function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(e)},r.onerror=function(){return n(new Error("Failed to load image: ".concat(e)))},r.src=e})})):Promise.resolve()}}],a=[{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=(new e).loadCollection(t);return"function"==typeof n&&r.then(function(){return n()}),r}}],r&&i(t.prototype,r),a&&i(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,a,s,l}();function u(e){return String(e).replace(/"/g,'\\"')}var l=["__ajax"];function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}var v=function(){return e=function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var o=n.__ajax,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,l);this.ok=!!o.ok,this.severity=o.severity||"info",this.message=null!==(t=o.message)&&void 0!==t?t:null,this.data=i||{},this.invalid=o.invalid||{},this.ops=Array.isArray(o.ops)?o.ops:[],this.redirect=null,this.status=r},t=[{key:"isFatal",value:function(){return"fatal"===this.severity||this.status>=500&&this.status<=599}},{key:"isError",value:function(){return"error"===this.severity||this.isFatal()||!1===this.ok}},{key:"getMessage",value:function(){return this.message}},{key:"getInvalid",value:function(){return this.invalid||{}}},{key:"getData",value:function(){return this.data||{}}},{key:"getStatus",value:function(){return this.status}},{key:"getSeverity",value:function(){return this.severity}},{key:"getOps",value:function(e){return e?this.ops.filter(function(t){return(null==t?void 0:t.op)===e}):this.ops}},{key:"getFlash",value:function(){return this.getOps("flash").map(function(e){var t=e.level,n=void 0===t?"info":t,r=e.text;return{level:n,text:void 0===r?"":r}})}},{key:"getBrowserEvents",value:function(){return this.getOps("dispatch").map(function(e){var t=e.selector;return{selector:void 0===t?null:t,event:e.event,detail:e.detail,async:e.async}})}},{key:"getDomPatches",value:function(){return this.getOps("patchDom").map(function(e){var t=e.selector,n=e.html,r=void 0===n?"":n,o=e.swap;return{selector:t,html:r,swap:void 0===o?"innerHTML":o}})}},{key:"getPartials",value:function(){return this.getOps("partial").map(function(e){var t=e.name,n=e.html;return{name:t,html:void 0===n?"":n}})}},{key:"getAssets",value:function(){var e,t={js:[],css:[],img:[]},n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(this.getOps("loadAssets"));try{for(n.s();!(e=n.n()).done;){var r,o=e.value,i=o.type,a=o.urls,s=void 0===a?[]:a;t[i]&&(r=t[i]).push.apply(r,f(s))}}catch(e){n.e(e)}finally{n.f()}return t.js=Array.from(new Set(t.js)),t.css=Array.from(new Set(t.css)),t.img=Array.from(new Set(t.img)),t}},{key:"getRedirectUrl",value:function(){var e=this.getOps("redirect")[0];return(null==e?void 0:e.url)||this.redirect||null}}],t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}var w=function(){return e=function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("The request handler name is not specified.");if(!t.match(/^(?:\w+\:{2})?on*/))throw new Error('Invalid handler name. The correct handler name format is: "onEvent".');if("undefined"==typeof FormData)throw new Error("The browser does not support the FormData interface.");this.options=n,this.handler=t},t=[{key:"getRequestOptions",value:function(){return{method:"POST",url:this.options.url?this.options.url:window.location.href,headers:this.buildHeaders(),responseType:!1===this.options.download?"":"blob"}}},{key:"buildHeaders",value:function(){var e=this.handler,t=this.options,n={"X-Requested-With":"XMLHttpRequest","X-AJAX-HANDLER":e};t.files||(n["Content-Type"]=t.bulk?"application/json":"application/x-www-form-urlencoded"),t.flash&&(n["X-AJAX-FLASH"]=1),t.partial&&(n["X-AJAX-PARTIAL"]=t.partial);var r=this.extractPartials(t.update,t.partial);r&&(n["X-AJAX-PARTIALS"]=r);var o=this.getXSRFToken();o&&(n["X-XSRF-TOKEN"]=o);var i=this.getCSRFToken();return i&&(n["X-CSRF-TOKEN"]=i),t.headers&&t.headers.constructor==={}.constructor&&Object.assign(n,t.headers),n}},{key:"extractPartials",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=[];if(e){if("object"!==m(e))throw new Error("Invalid update value. The correct format is an object ({...})");for(var r in e)"_self"===r&&t?n.push(t):n.push(r)}return n.join("&")}},{key:"getCSRFToken",value:function(){var e=document.querySelector('meta[name="csrf-token"]');return e?e.getAttribute("content"):null}},{key:"getXSRFToken",value:function(){var e=null;if(document.cookie&&""!=document.cookie)for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var r=t[n].replace(/^([\s]*)|([\s]*)$/g,"");if("XSRF-TOKEN="==r.substring(0,11)){e=decodeURIComponent(r.substring(11));break}}return e}}],n=[{key:"fetch",value:function(e,t){return new this(e,t).getRequestOptions()}}],t&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}var x="replace",E="prepend",O="append",A="innerHTML",T=function(){return e=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=r,this.envelope=t,this.partialMap=n,this.afterUpdateCallback=null},(t=[{key:"apply",value:function(){this.applyPartialUpdates(),this.applyDomUpdates()}},{key:"afterUpdate",value:function(e){this.afterUpdateCallback=e}},{key:"applyPartialUpdates",value:function(){var e=this;this.envelope.getPartials().forEach(function(t){var n=e.partialMap[t.name],r=[];e.partialMap._self&&t==e.options.partial&&e.options.partialEl?(e.partialMap._self,function(e){throw new TypeError('"'+e+'" is read-only')}("selector"),r=[e.options.partialEl]):n&&(r=P(n,'[data-ajax-partial="'+t+'"]')),r.forEach(function(r){e.patchDom(r,t.html,function(e,t){if("string"==typeof e){if("!"===e.charAt(0))return x;if("@"===e.charAt(0))return O;if("^"===e.charAt(0))return E}return void 0!==t.dataset.ajaxUpdateMode?t.dataset.ajaxUpdateMode:A}(n,r))})})}},{key:"applyDomUpdates",value:function(){var e=this;this.envelope.getDomPatches().forEach(function(t){document.querySelectorAll(t.selector).forEach(function(n){e.patchDom(n,t.html,t.swap)})})}},{key:"patchDom",value:function(e,t,n){var r,o=e.parentNode;switch(n){case"append":case"beforeend":e.insertAdjacentHTML("beforeend",t),q(e,t);break;case"afterend":e.insertAdjacentHTML("afterend",t),q(e,t);break;case"beforebegin":e.insertAdjacentHTML("beforebegin",t),q(e,t);break;case"prepend":case"afterbegin":e.insertAdjacentHTML("afterbegin",t),q(e,t);break;case"replace":e.replaceWith(t),q(o,t);break;case"outerHTML":e.outerHTML=t,q(o,t);break;default:e.innerHTML=t,r=e,Array.from(r.querySelectorAll("script")).forEach(function(e){var t=document.createElement("script");Array.from(e.attributes).forEach(function(e){return t.setAttribute(e.name,e.value)}),t.appendChild(document.createTextNode(e.innerHTML)),e.parentNode.replaceChild(t,e)})}this.afterUpdateCallback&&this.afterUpdateCallback(e)}}])&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function P(e,t){return!0===e?document.querySelectorAll(t):"string"!=typeof e?[e]:-1===["#",".","@","^","!","="].indexOf(e.charAt(0))?[]:(-1!==["@","^","!","="].indexOf(e.charAt(0))&&(e=e.substring(1)),e||(e=t),document.querySelectorAll(e))}function q(e,t){var n=document.createElement("div");n.innerHTML=t,Array.from(n.querySelectorAll("script")).forEach(function(t){var n=document.createElement("script");Array.from(t.attributes).forEach(function(e){return n.setAttribute(e.name,e.value)}),n.appendChild(document.createTextNode(t.innerHTML)),e.appendChild(n),e.removeChild(n)})}function C(){var e=jax.useTurbo&&jax.useTurbo()?jax.AjaxTurbo.controller.getLastVisitUrl():function(){if(!document.referrer)return null;try{var e=new URL(document.referrer);if(e.origin!==location.origin)return null;var t=localStorage.getItem("ocPushStateReferrer");return t&&0===t.indexOf(e.pathname)?t:document.referrer}catch(e){}}();return!e||function(e){var t=new URL(e,window.location.origin),n=new URL(window.location.href);return t.origin===n.origin&&t.pathname===n.pathname}(e)?null:e}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=Promise.resolve().then(function(){return e.apply(t,r)});return makeDeferredCompat(i)}}function D(e){e||(e=function(){});var t,n,r=!1,o=function(){},i=new Promise(function(i,a){t=i,n=a,e(function(e){r||i(e)},function(e){r||a(e)},function(e){o=e})});return i.cancel=function(){r=!0,o()},i.onCancel=function(e){return o="function"==typeof e?e:o,i},i.resolve=function(e){r||t(e)},i.reject=function(e){r||n(e)},function(e){return Object.assign(e,{done:function(t){return e.then(t),this},fail:function(t){return e.catch(t),this},always:function(t){return e.finally(t),this}})}(i)}function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function B(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}throw new TypeError(F(e)+" is not iterable")}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){I(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function I(e,t,n){return(t=G(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=V(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function J(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,l=Object.create(u.prototype);return M(l,"_invoke",function(n,r,o){var i,s,u,l=0,c=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,u=e,d.n=n,a}};function p(n,r){for(s=n,u=r,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],p=d.p,h=i[2];n>3?(o=h===r)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,d.v=r,d.n=i[1]):p<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,d.n=h,s=0))}if(o||n>1)return a;throw f=!0,r}return function(o,c,h){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),s=c,u=h;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(d.n=-1),p(s,u)):d.n=u:d.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(M(t={},r,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,M(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,M(f,"constructor",l),M(l,"constructor",u),u.displayName="GeneratorFunction",M(l,o,"GeneratorFunction"),M(f),M(f,o,"Generator"),M(f,r,function(){return this}),M(f,"toString",function(){return"[object Generator]"}),(J=function(){return{w:i,m:d}})()}function M(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}M=function(e,t,n,r){function i(t,n){M(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},M(e,t,n,r)}function _(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function Q(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){_(i,r,o,a,s,"next",e)}function s(e){_(i,r,o,a,s,"throw",e)}a(void 0)})}}function H(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){if(e){if("string"==typeof e)return X(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,G(r.key),r)}}function G(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==F(t)?t:t+""}var W=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t.el,this.delegate=t,this.context=n,this.options=r,this.context.start=this.start.bind(this),this.context.success=R(this.success,this),this.context.error=R(this.error,this),this.context.complete=R(this.complete,this),this.context.cancel=this.cancel.bind(this)},t=[{key:"invoke",value:function(e,t){return this.options[e]?this.options[e].apply(this.context,t):this[e]?this[e].apply(this,H(t)):void 0}},{key:"invokeFunc",value:function(e,t){if(this.options[e])return this.options[e](this.el,t)}},{key:"start",value:function(e){this.invoke("markAsUpdating",[!0]),this.delegate.options.message&&this.invoke("handleProgressMessage",[this.delegate.options.message,!1])}},{key:"success",value:(l=Q(J().m(function e(t,n,r){var o;return J().w(function(e){for(;;)switch(e.n){case 0:if(!1!==this.invoke("beforeUpdate",[t,n,r])){e.n=1;break}return e.a(2);case 1:if(!1!==this.invokeFunc("beforeUpdateFunc",t)){e.n=2;break}return e.a(2);case 2:if(this.delegate.applicationAllowsUpdate(t,n,r)){e.n=3;break}return e.a(2);case 3:if(!(this.delegate.options.download&&t instanceof Blob)){e.n=4;break}return this.invoke("handleFileDownload",[t,r]),this.delegate.notifyApplicationRequestSuccess(t,n,r),this.invokeFunc("successFunc",t),e.a(2);case 4:if(null!==(o=t.$env)&&void 0!==o&&o.isFatal()){e.n=6;break}return e.n=5,this.invoke("handleUpdateOperations",[t,n,r]);case 5:return e.n=6,this.invoke("handleUpdateResponse",[t,n,r]);case 6:this.delegate.notifyApplicationRequestSuccess(t,n,r),this.invokeFunc("successFunc",t);case 7:return e.a(2)}},e,this)})),function(e,t,n){return l.apply(this,arguments)})},{key:"error",value:(u=Q(J().m(function e(t,n,r){var o,i,a;return J().w(function(e){for(;;)switch(e.n){case 0:if(a=null===(o=t.$env)||void 0===o?void 0:o.getMessage(),void 0===window.jaxUnloading||!window.jaxUnloading){e.n=1;break}return e.a(2,updatePromise);case 1:if(this.delegate.toggleRedirect(!1),null!==(i=t.$env)&&void 0!==i&&i.isFatal()){e.n=4;break}return e.n=2,this.invoke("handleUpdateOperations",[t,n,r]);case 2:return e.n=3,this.invoke("handleUpdateResponse",[t,n,r]);case 3:e.n=5;break;case 4:t.constructor==={}.constructor?!a&&t.message?a=t.message:(a="Something went wrong! Check the browser console.",console.warn(t)):a=t;case 5:if(this.el!==document&&this.el.setAttribute("data-error-message",a),this.delegate.applicationAllowsError(t,n,r)){e.n=6;break}return e.a(2);case 6:if(!1!==this.invokeFunc("errorFunc",t)){e.n=7;break}return e.a(2);case 7:this.invoke("handleErrorMessage",[a]);case 8:return e.a(2)}},e,this)})),function(e,t,n){return u.apply(this,arguments)})},{key:"complete",value:(a=Q(J().m(function e(t,n,r){return J().w(function(e){for(;;)switch(e.n){case 0:this.delegate.notifyApplicationRequestComplete(t,n,r),this.invokeFunc("completeFunc",t),this.invoke("markAsUpdating",[!1]),this.delegate.options.message&&this.invoke("handleProgressMessage",[null,!0]);case 1:return e.a(2)}},e,this)})),function(e,t,n){return a.apply(this,arguments)})},{key:"cancel",value:function(){this.invokeFunc("cancelFunc")}},{key:"handleConfirmMessage",value:function(e){var t,n,r=this;if(new Promise(function(e,r){t=e,n=r}).then(function(){r.delegate.sendInternal()}).catch(function(){r.invoke("cancel",[])}),this.delegate.notifyApplicationConfirmMessage(e,{resolve:t,reject:n}).defaultPrevented)return!1;if(e){var o=confirm(e);return o||this.invoke("cancel",[]),o}}},{key:"handleProgressMessage",value:function(e,t){}},{key:"handleFlashMessage",value:function(e,t){}},{key:"handleErrorMessage",value:function(e){this.delegate.notifyApplicationErrorMessage(e).defaultPrevented||e&&alert(e)}},{key:"handleValidationMessage",value:function(e,t){if(this.delegate.notifyApplicationBeforeValidate(e,t),this.delegate.formEl){var n=!0;for(var r in t){var o,i=[];o=r.replace(/\.(\w+)/g,"[$1]"),i.push('[name="'+o+'"]:not([disabled])'),i.push('[name="'+o+'[]"]:not([disabled])'),o=("."+r).replace(/\.(\w+)/g,"[$1]"),i.push('[name$="'+o+'"]:not([disabled])'),i.push('[name$="'+o+'[]"]:not([disabled])');var a=r.replace(/\.[0-9]+$/g,"");r!==a&&(o=a.replace(/\.(\w+)/g,"[$1]"),i.push('[name="'+o+'[]"]:not([disabled])'),o=("."+a).replace(/\.(\w+)/g,"[$1]"),i.push('[name$="'+o+'[]"]:not([disabled])'));var s=this.delegate.formEl.querySelector(i.join(", "));if(s){var u=this.delegate.notifyApplicationFieldInvalid(s,r,t[r],n);n&&(u.defaultPrevented||s.focus(),n=!1)}}}}},{key:"handleBrowserEvents",value:(i=Q(J().m(function e(){var t,n,r,o,i,a,s=this,u=arguments;return J().w(function(e){for(;;)switch(e.p=e.n){case 0:if((t=u.length>0&&void 0!==u[0]?u[0]:[]).length){e.n=1;break}return e.a(2,!1);case 1:n=!1,r=L(t),e.p=2,i=J().m(function e(){var t,r;return J().w(function(e){for(;;)switch(e.n){case 0:if(!0!==(null==(t=o.value)?void 0:t.async)){e.n=2;break}return e.n=1,new Promise(function(e,r){var o=!1,i=s.delegate.notifyApplicationCustomEvent(t.event,N(N({},t.detail||{}),{},{context:s.context,promise:{resolve:function(t){o||(o=!0,e(t))},reject:function(e){o||(o=!0,r(e))}}}));null!=i&&i.defaultPrevented&&(n=!0)});case 1:e.n=3;break;case 2:null!=(r=s.delegate.notifyApplicationCustomEvent(t.event,N(N({},t.detail||{}),{},{context:s.context})))&&r.defaultPrevented&&(n=!0);case 3:return e.a(2)}},e)}),r.s();case 3:if((o=r.n()).done){e.n=5;break}return e.d(B(i()),4);case 4:e.n=3;break;case 5:e.n=7;break;case 6:e.p=6,a=e.v,r.e(a);case 7:return e.p=7,r.f(),e.f(7);case 8:return e.a(2,n)}},e,null,[[2,6,7,8]])})),function(){return i.apply(this,arguments)})},{key:"handleRedirectResponse",value:function(e){this.delegate.notifyApplicationBeforeRedirect().defaultPrevented||(this.options.browserRedirectBack&&(e=C()||e),jax.useTurbo&&jax.useTurbo()?jax.visit(e):location.assign(e))}},{key:"markAsUpdating",value:function(e){var t=this.options.update||{};for(var n in t){var r=t[n],o=[];t._self&&n==this.options.partial&&this.delegate.partialEl?(r=t._self,o=[this.delegate.partialEl]):o=P(r,'[data-ajax-partial="'+n+'"]'),o.forEach(function(t){e?t.setAttribute("data-ajax-updating",""):t.removeAttribute("data-ajax-updating")})}}},{key:"handleUpdateResponse",value:(o=Q(J().m(function e(t,n,r){var o,i,a=this;return J().w(function(e){for(;;)switch(e.n){case 0:if(t.$env){e.n=1;break}return e.a(2);case 1:o=this.options.update||{},(i=new T(t.$env,o,{partial:this.options.partial,partialEl:this.delegate.partialEl})).afterUpdate(function(e){a.delegate.notifyApplicationAjaxUpdate(e,t,n,r)}),i.apply(),setTimeout(function(){a.delegate.notifyApplicationUpdateComplete(t,n,r),a.invoke("afterUpdate",[t,n,r]),a.invokeFunc("afterUpdateFunc",t)},0);case 2:return e.a(2)}},e,this)})),function(e,t,n){return o.apply(this,arguments)})},{key:"handleUpdateOperations",value:(r=Q(J().m(function e(t,n,r){var o,i,a,u,l,c,f,d,p,h,y,v,m;return J().w(function(e){for(;;)switch(e.n){case 0:if(c=this.delegate.options.flash?null===(o=t.$env)||void 0===o?void 0:o.getFlash():null)for(f in c)this.invoke("handleFlashMessage",[f.text,f.level]);if(d=null===(i=t.$env)||void 0===i?void 0:i.getBrowserEvents(),!(m=d)){e.n=2;break}return e.n=1,this.invoke("handleBrowserEvents",[d]);case 1:m=e.v;case 2:if(!m){e.n=3;break}return e.a(2);case 3:if((p=null===(a=t.$env)||void 0===a?void 0:a.getRedirectUrl())&&this.delegate.toggleRedirect(p),this.delegate.isRedirect&&this.invoke("handleRedirectResponse",[this.delegate.options.redirect]),(h=null===(u=t.$env)||void 0===u?void 0:u.getInvalid())&&this.invoke("handleValidationMessage",[null===(y=t.$env)||void 0===y?void 0:y.getMessage(),h]),!(v=null===(l=t.$env)||void 0===l?void 0:l.getAssets())){e.n=4;break}return e.n=4,s.load(v);case 4:return e.a(2)}},e,this)})),function(e,t,n){return r.apply(this,arguments)})},{key:"handleFileDownload",value:function(e,t){if(this.options.browserTarget)window.open(window.URL.createObjectURL(e),this.options.browserTarget);else{var n="string"==typeof this.options.download?this.options.download:function(e){var t=e.getResponseHeader("Content-Disposition");if(!t)return null;for(var n=/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/g,r=null,o=null;null!==(o=n.exec(t));)r=o;return null!==r&&r[1]?null===/filename[^;*=\n]*\*=[^']*''/.exec(r[0])?r[1].replace(/['"]/g,""):decodeURIComponent(r[1].substring(r[1].indexOf("''")+2)):null}(t);if(n){var r=document.createElement("a");r.href=window.URL.createObjectURL(e),r.download=n,r.target="_blank",r.click(),window.URL.revokeObjectURL(r.href)}}}},{key:"applyQueryToUrl",value:function(e){for(var t=new URLSearchParams(window.location.search),n=function(){var n=o[r],i=e[n];Array.isArray(i)?(t.delete(n),t.delete("".concat(n,"[]")),i.forEach(function(e){return t.append("".concat(n,"[]"),e)})):null===i?(t.delete(n),t.delete("".concat(n,"[]"))):t.set(n,i)},r=0,o=Object.keys(e);r<o.length;r++)n();var i=window.location.pathname,a=t.toString();a&&(i+="?"+a.replaceAll("%5B%5D=","[]=")),jax.useTurbo&&jax.useTurbo()?jax.visit(i,{action:"swap",scroll:!1}):(history.replaceState(null,"",i),localStorage.setItem("ocPushStateReferrer",i))}}],t&&K(e.prototype,t),n&&K(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,o,i,a,u,l}();function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function Y(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:t+""}var ee=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"assignToObj",value:function(t,n,r){(new e).assignObjectInternal(t,n,r)}},{key:"serializeJSON",value:function(t){return(new e).parseContainer(t)}}],(n=[{key:"parseContainer",value:function(e){var t=this,n={};return e.querySelectorAll("input, textarea, select").forEach(function(e){if(!(!e.name||e.disabled||["file","reset","submit","button"].indexOf(e.type)>-1)&&(!(["checkbox","radio"].indexOf(e.type)>-1)||e.checked)){if("select-multiple"===e.type){var r=[];return Array.from(e.options).forEach(function(t){t.selected&&r.push({name:e.name,value:t.value})}),void t.assignObjectInternal(n,e.name,r)}t.assignObjectInternal(n,e.name,e.value)}}),n}},{key:"assignObjectInternal",value:function(e,t,n){this.assignObjectNested(e,this.nameToArray(t),n,t.endsWith("[]"))}},{key:"assignObjectNested",value:function(e,t,n,r){var o=e,i=t.length-1;t.forEach(function(e,t){r&&t===i?(Array.isArray(o[e])||(o[e]=[]),o[e].push(n)):(void 0!==o[e]&&o[e].constructor==={}.constructor||(o[e]={}),t===i&&(o[e]=n),o=o[e])})}},{key:"nameToArray",value:function(e){for(var t,n=/([^\]\[]+)/g,r=[];t=n.exec(e);)r.push(t[0]);return r}}])&&Z(t.prototype,n),r&&Z(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,re(r.key),r)}}function re(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==te(t)?t:t+""}var oe=function(){return e=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userData=t||{},this.targetEl=n,this.formEl=r},(t=[{key:"getRequestData",value:function(){var e;return e=this.formEl?new FormData(this.formEl):new FormData,this.appendSingleInputElement(e),e}},{key:"getAsFormData",value:function(){return this.appendJsonToFormData(this.getRequestData(),this.userData)}},{key:"getAsQueryString",value:function(){return this.convertFormDataToQuery(this.getAsFormData())}},{key:"getAsJsonData",value:function(){return JSON.stringify(this.convertFormDataToJson(this.getAsFormData()))}},{key:"appendSingleInputElement",value:function(e){if(!this.formEl&&this.targetEl&&(t=this.targetEl,["input","select","textarea"].includes((t.tagName||"").toLowerCase()))){var t,n=this.targetEl.name;n&&void 0===this.userData[n]&&("file"===this.targetEl.type?this.targetEl.files.forEach(function(t){e.append(n,t)}):e.append(n,this.targetEl.value))}}},{key:"appendJsonToFormData",value:function(e,t,n){var r=this;for(var o in t){var i=o;n&&(i=n+"["+o+"]");var a=t[o];a&&a.constructor==={}.constructor?this.appendJsonToFormData(e,a,i):a&&a.constructor===[].constructor?a.forEach(function(t,n){t.constructor==={}.constructor||t.constructor===[].constructor?r.appendJsonToFormData(e,t,i+"["+n+"]"):e.append(i+"[]",r.castJsonToFormData(t))}):e.append(i,this.castJsonToFormData(a))}return e}},{key:"convertFormDataToQuery",value:function(e){var t=this.formDataToArray(e);return Object.keys(t).map(function(e){return e.endsWith("[]")?t[e].map(function(t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}},{key:"convertFormDataToJson",value:function(e){var t=this.formDataToArray(e),n={};for(var r in t)ee.assignToObj(n,r,t[r]);return n}},{key:"formDataToArray",value:function(e){return Object.fromEntries(Array.from(e.keys()).map(function(t){return[t,t.endsWith("[]")?e.getAll(t):e.getAll(t).pop()]}))}},{key:"castJsonToFormData",value:function(e){return null==e?"":!0===e?"1":!1===e?"0":e}}])&&ne(e.prototype,t),n&&ne(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.target,r=void 0===n?document:n,o=t.detail,i=void 0===o?{}:o,a=t.bubbles,s=void 0===a||a,u=t.cancelable,l=new CustomEvent(e,{detail:i,bubbles:s,cancelable:void 0===u||u});return r.dispatchEvent(l),l}function ae(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,i=(o=function(e,t){return e.reduce(function(e,n,r){return e+n+(null==t[r]?"":t[r])},"")}(e,n),o.replace(/^\n/,"")).split("\n"),a=i[0].match(/^\s+/),s=a?a[0].length:0;return i.map(function(e){return e.slice(s)}).join("\n")}function se(e){return se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(e)}function ue(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ce(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){if(e){if("string"==typeof e)return fe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pe(r.key),r)}}function pe(e){var t=function(e,t){if("object"!=se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==se(t)?t:t+""}var he=/[^.]*(?=\..*)\.|.*/,ye=/\..*/,ve=/::\d+$/,me={},be=1,ge={mouseenter:"mouseover",mouseleave:"mouseout"},we=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]),je=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},n=[{key:"on",value:function(e,t,n,r,o){Oe(e,t,n,r,o,!1)}},{key:"one",value:function(e,t,n,r,o){Oe(e,t,n,r,o,!0)}},{key:"off",value:function(e,t,n,r,o){if("string"==typeof t&&e){var i=le(Ee(t,n,r,o),4),a=i[0],s=i[1],u=i[2],l=i[3],c=u!==t,f=Se(e),d=f[u]||{},p=t.startsWith(".");if(void 0===s){if(p)for(var h=0,y=Object.keys(f);h<y.length;h++)Te(e,f,y[h],t.slice(1));for(var v=0,m=Object.keys(d);v<m.length;v++){var b=m[v],g=b.replace(ve,"");if(!c||t.includes(g)){var w=d[b];Ae(e,f,u,w.callable,w.delegationSelector,l)}}}else{if(!d)return;Ae(e,f,u,s,a?n:null,l)}}}},{key:"dispatch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.target,r=void 0===n?document:n,o=t.detail,i=void 0===o?{}:o,a=t.bubbles,s=void 0===a||a,u=t.cancelable;return ie(e,{target:r,detail:i,bubbles:s,cancelable:void 0===u||u})}}],(t=null)&&de(e.prototype,t),n&&de(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ke(e,t){return t&&"".concat(t,"::").concat(be++)||e.uidEvent||be++}function Se(e){var t=ke(e);return e.uidEvent=t,me[t]=me[t]||{},me[t]}function xe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.values(e).find(function(e){return e.callable===t&&e.delegationSelector===n})}function Ee(e,t,n,r){var o,i="string"==typeof t,a=i?n:t,s=i?r:n,u=(o=(o=e).replace(ye,""),ge[o]||o);return we.has(u)||(u=e),[i,a,u,s]}function Oe(e,t,n,r,o,i){if("string"==typeof t&&e){var a=le(Ee(t,n,r,o),4),s=a[0],u=a[1],l=a[2],c=a[3];if(t in ge){u=function(e){return function(t){if(!t.relatedTarget||t.relatedTarget!==t.delegateTarget&&!t.delegateTarget.contains(t.relatedTarget))return e.call(this,t)}}(u)}var f=Se(e),d=f[l]||(f[l]={}),p=xe(d,u,s?n:null);if(p)p.oneOff=p.oneOff&&i;else{var h=ke(u,t.replace(he,"")),y=s?function(e,t,n){return function r(o){for(var i=e.querySelectorAll(t),a=o.target;a&&a!==this;a=a.parentNode){var s,u=ue(i);try{for(u.s();!(s=u.n()).done;){if(s.value===a)return o.delegateTarget=a,r.oneOff&&je.off(e,o.type,t,n),n.apply(a,[o])}}catch(e){u.e(e)}finally{u.f()}}}}(e,n,u):function(e,t){return function n(r){return r.delegateTarget=e,n.oneOff&&je.off(e,r.type,t),t.apply(e,[r])}}(e,u);y.delegationSelector=s?n:null,y.callable=u,y.oneOff=i,y.uidEvent=h,d[h]=y,e.addEventListener(l,y,c)}}}function Ae(e,t,n,r,o,i){var a=xe(t[n],r,o);a&&(e.removeEventListener(n,a,i),delete t[n][a.uidEvent])}function Te(e,t,n,r){for(var o=t[n]||{},i=0,a=Object.keys(o);i<a.length;i++){var s=a[i];if(s.includes(r)){var u=o[s];Ae(e,t,n,u.callable,u.delegationSelector)}}}function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ce(r.key),r)}}function Ce(e){var t=function(e,t){if("object"!=Pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pe(t)?t:t+""}var Re,De=0,Fe=-1,Be=-2,Ue=-3,Ne=function(){return e=function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.failed=!1,this.progress=0,this.sent=!1,this.delegate=t,this.url=n,this.options=r,this.headers=r.headers||{},this.method=r.method||"GET",this.responseType=r.responseType||"",this.data=r.data,this.timeout=r.timeout||0,this.requestProgressed=function(e){e.lengthComputable&&o.setProgress(e.loaded/e.total)},this.requestLoaded=function(){o.endRequest(function(e){o.processResponseData(e,function(e,t){var n=e.getResponseHeader("Content-Type"),r=function(e){return(e||"").includes("application/json")}(n)?JSON.parse(t):t;if(o.options.htmlOnly&&!function(e){return(e||"").match(/^text\/html|^application\/xhtml\+xml/)}(n))return o.failed=!0,void o.delegate.requestFailedWithStatusCode(Be);e.status>=200&&e.status<300?o.delegate.requestCompletedWithResponse(r,e.status,function(e,t){if(e.getResponseHeader("X-AJAX-LOCATION"))return e.getResponseHeader("X-AJAX-LOCATION");var n=t.match(/^(.*)#/),r=n?n[1]:t;return r!==e.responseURL?e.responseURL:null}(e,o.url)):(o.failed=!0,o.delegate.requestFailedWithStatusCode(e.status,r))})})},this.requestFailed=function(){o.endRequest(function(){o.failed=!0,o.delegate.requestFailedWithStatusCode(De)})},this.requestTimedOut=function(){o.endRequest(function(){o.failed=!0,o.delegate.requestFailedWithStatusCode(Fe)})},this.requestCanceled=function(){o.options.trackAbort?o.endRequest(function(){o.failed=!0,o.delegate.requestFailedWithStatusCode(Ue)}):o.endRequest()},this.createXHR()},t=[{key:"send",value:function(){this.xhr&&!this.sent&&(this.notifyApplicationBeforeRequestStart(),this.setProgress(0),this.xhr.send(this.data||null),this.sent=!0,this.delegate.requestStarted())}},{key:"abort",value:function(){this.xhr&&this.sent&&this.xhr.abort()}},{key:"notifyApplicationBeforeRequestStart",value:function(){je.dispatch("ajax:request-start",{detail:{url:this.url,xhr:this.xhr},cancelable:!1})}},{key:"notifyApplicationAfterRequestEnd",value:function(){je.dispatch("ajax:request-end",{detail:{url:this.url,xhr:this.xhr},cancelable:!1})}},{key:"createXHR",value:function(){var e=this.xhr=new XMLHttpRequest;for(var t in e.open(this.method,this.url,!0),e.responseType=this.responseType,e.onprogress=this.requestProgressed,e.onload=this.requestLoaded,e.onerror=this.requestFailed,e.ontimeout=this.requestTimedOut,e.onabort=this.requestCanceled,this.timeout&&(e.timeout=1e3*this.timeout),this.headers)e.setRequestHeader(t,this.headers[t]);return e}},{key:"endRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.xhr&&(this.notifyApplicationAfterRequestEnd(),e(this.xhr),this.destroy())}},{key:"setProgress",value:function(e){this.progress=e,this.delegate.requestProgressed(e)}},{key:"destroy",value:function(){this.setProgress(1),this.delegate.requestFinished()}},{key:"processResponseData",value:function(e,t){if("blob"===this.responseType){var n=e.getResponseHeader("Content-Disposition")||"";if(0!==n.indexOf("attachment")&&0!==n.indexOf("inline")){var r=new FileReader;r.addEventListener("load",function(){t(e,r.result)}),r.readAsText(e.response)}else t(e,e.response)}else t(e,e.responseText)}}],t&&qe(e.prototype,t),n&&qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Me(r.key),r)}}function Je(e,t,n){return(t=Me(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ie(t)?t:t+""}var $e=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.hiding=!1,this.value=0,this.visible=!1,this.trickle=function(){t.setValue(t.value+Math.random()/100)}}return t=e,n=[{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.cssClass&&this.progressElement.classList.add(e.cssClass),this.visible||(this.visible=!0,this.installStylesheetElement(),this.installProgressElement(),this.startTrickling())}},{key:"hide",value:function(){var e=this;this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(function(){e.uninstallProgressElement(),e.stopTrickling(),e.visible=!1,e.hiding=!1}))}},{key:"setValue",value:function(e){this.value=e,this.refresh()}},{key:"installStylesheetElement",value:function(){e.stylesheetReady||(document.head.insertBefore(this.stylesheetElement,document.head.firstChild),e.stylesheetReady=!0)}},{key:"installProgressElement",value:function(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}},{key:"fadeProgressElement",value:function(t){this.progressElement.style.opacity="0",setTimeout(t,1.5*e.animationDuration)}},{key:"uninstallProgressElement",value:function(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}},{key:"startTrickling",value:function(){this.trickleInterval||(this.trickleInterval=setInterval(this.trickle,e.animationDuration))}},{key:"stopTrickling",value:function(){clearInterval(this.trickleInterval),delete this.trickleInterval}},{key:"refresh",value:function(){var e=this;requestAnimationFrame(function(){e.progressElement.style.width="".concat(10+90*e.value,"%")})}},{key:"createStylesheetElement",value:function(){var t=document.createElement("style");return t.textContent=e.defaultCSS,t}},{key:"createProgressElement",value:function(){var e=document.createElement("div");return e.className="oc-progress-bar",e}}],r=[{key:"defaultCSS",get:function(){return ae(Re||(t=["\n        .oc-progress-bar {\n            position: fixed;\n            display: block;\n            top: 0;\n            left: 0;\n            height: 3px;\n            background: #0076ff;\n            z-index: 9999;\n            transition:\n                width ","ms ease-out,\n                opacity ","ms ","ms ease-in;\n            transform: translate3d(0, 0, 0);\n        }\n    "],n||(n=t.slice(0)),Re=Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))),e.animationDuration,e.animationDuration/2,e.animationDuration/2);var t,n}},{key:"progressBar",get:function(){return{show:function(){var e=_e();e.setValue(0),e.show()},hide:function(){var e=_e();e.setValue(100),e.hide()}}}}],n&&Le(t.prototype,n),r&&Le(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function _e(){return $e.instance||($e.instance=new $e),$e.instance}Je($e,"instance",null),Je($e,"stylesheetReady",!1),Je($e,"animationDuration",300);var Qe=["__ajax"];function He(e){return He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},He(e)}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Xe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ke(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof s?r:s,l=Object.create(u.prototype);return Ge(l,"_invoke",function(n,r,o){var i,s,u,l=0,c=o||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,u=e,d.n=n,a}};function p(n,r){for(s=n,u=r,t=0;!f&&l&&!o&&t<c.length;t++){var o,i=c[t],p=d.p,h=i[2];n>3?(o=h===r)&&(u=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((o=n<2&&p<i[1])?(s=0,d.v=r,d.n=i[1]):p<h&&(o=n<3||i[0]>r||r>h)&&(i[4]=n,i[5]=r,d.n=h,s=0))}if(o||n>1)return a;throw f=!0,r}return function(o,c,h){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),s=c,u=h;(t=s<2?e:u)||!f;){i||(s?s<3?(s>1&&(d.n=-1),p(s,u)):d.n=u:d.v=u);try{if(l=2,i){if(s||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),s=1);i=e}else if((t=(f=d.n<0)?u:n.call(r,d))!==a)break}catch(t){i=e,s=1,u=t}finally{l=1}}return{value:t,done:f}}}(n,o,i),!0),l}var a={};function s(){}function u(){}function l(){}t=Object.getPrototypeOf;var c=[][r]?t(t([][r]())):(Ge(t={},r,function(){return this}),t),f=l.prototype=s.prototype=Object.create(c);function d(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,Ge(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=l,Ge(f,"constructor",l),Ge(l,"constructor",u),u.displayName="GeneratorFunction",Ge(l,o,"GeneratorFunction"),Ge(f),Ge(f,o,"Generator"),Ge(f,r,function(){return this}),Ge(f,"toString",function(){return"[object Generator]"}),(Ke=function(){return{w:i,m:d}})()}function Ge(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}Ge=function(e,t,n,r){function i(t,n){Ge(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},Ge(e,t,n,r)}function We(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,o)}function ze(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){We(i,r,o,a,s,"next",e)}function s(e){We(i,r,o,a,s,"throw",e)}a(void 0)})}}function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach(function(t){et(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function et(e,t,n){return(t=nt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nt(r.key),r)}}function nt(e){var t=function(e,t){if("object"!=He(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=He(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==He(t)?t:t+""}function rt(e,t,n){if(!e||e.constructor!=={}.constructor||!e.__ajax)return e;e.__ajax;for(var r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,Qe),o={env:new v(e,t),status:t,xhr:n},i=0,a=Object.entries(o);i<a.length;i++){var s=Ve(a[i],2),u=s[0],l=s[1];Object.defineProperty(r,"$".concat(u),{value:l,enumerable:!1,writable:!1,configurable:!0})}return r}const ot=function(){function e(t,n,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.handler=n,this.options=Ye(Ye({},this.constructor.DEFAULTS),r||{}),this.context={el:t,handler:n,options:this.options},this.progressBar=new $e,this.showProgressBar=function(){o.progressBar.show({cssClass:"is-ajax"})}}return t=e,n=[{key:"start",value:function(){if(this.applicationAllowsSetup()&&(this.initOtherElements(),this.preprocessOptions(),this.actions=new W(this,this.context,this.options),this.validateClientSideForm()&&this.applicationAllowsRequest()&&(!this.options.confirm||this.actions.invoke("handleConfirmMessage",[this.options.confirm]))))return this.sendInternal(),this.promise}},{key:"sendInternal",value:function(){var e,t=this,n=new oe(this.options.data,this.el,this.formEl);e=this.options.files?n.getAsFormData():this.options.bulk?n.getAsJsonData():n.getAsQueryString(),this.options.query&&this.actions.invoke("applyQueryToUrl",[!0!==this.options.query?this.options.query:JSON.parse(n.getAsJsonData())]);var r=w.fetch(this.handler,this.options),o=r.url,i=r.headers,a=r.method,s=r.responseType;this.request=new Ne(this,o,{method:a,headers:i,responseType:s,data:e,trackAbort:!0}),this.promise=D(),this.isRedirect=this.options.redirect&&this.options.redirect.length>0,this.notifyApplicationBeforeSend(),this.notifyApplicationAjaxPromise(),this.promise.onCancel(function(){t.request.abort()}).then(function(e){t.isRedirect||(t.notifyApplicationAjaxDone(e,e.$status,e.$xhr),t.notifyApplicationAjaxAlways(e,e.$status,e.$xhr))}).catch(function(e){t.isRedirect||(t.notifyApplicationAjaxFail(e,e.$status,e.$xhr),t.notifyApplicationAjaxAlways(e,e.$status,e.$xhr))}),this.request.send()}},{key:"toggleRedirect",value:function(e){e?(this.options.redirect=e,this.isRedirect=!0):(this.options.redirect=null,this.isRedirect=!1)}},{key:"applicationAllowsSetup",value:function(){return!this.notifyApplicationAjaxSetup().defaultPrevented}},{key:"applicationAllowsRequest",value:function(){return!this.notifyApplicationBeforeRequest().defaultPrevented}},{key:"applicationAllowsUpdate",value:function(e,t,n){return!this.notifyApplicationBeforeUpdate(e,t,n).defaultPrevented}},{key:"applicationAllowsError",value:function(e,t,n){return!this.notifyApplicationRequestError(e,t,n).defaultPrevented}},{key:"notifyApplicationAjaxSetup",value:function(){return ie("ajax:setup",{target:this.el,detail:{context:this.context}})}},{key:"notifyApplicationAjaxPromise",value:function(){return ie("ajax:promise",{target:this.el,detail:{context:this.context}})}},{key:"notifyApplicationAjaxFail",value:function(e,t,n){return ie("ajax:fail",{target:this.el,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationAjaxDone",value:function(e,t,n){return ie("ajax:done",{target:this.el,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationAjaxAlways",value:function(e,t,n){return ie("ajax:always",{target:this.el,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationAjaxUpdate",value:function(e,t,n,r){return ie("ajax:update",{target:e,detail:{context:this.context,data:t,responseCode:n,xhr:r}})}},{key:"notifyApplicationBeforeRedirect",value:function(){return ie("ajax:before-redirect",{target:this.el})}},{key:"notifyApplicationBeforeRequest",value:function(){return ie("ajax:before-request",{target:this.triggerEl,detail:{context:this.context}})}},{key:"notifyApplicationBeforeUpdate",value:function(e,t,n){return ie("ajax:before-update",{target:this.triggerEl,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationRequestSuccess",value:function(e,t,n){return ie("ajax:request-success",{target:this.triggerEl,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationRequestError",value:function(e,t,n){return ie("ajax:request-error",{target:this.triggerEl,detail:{context:this.context,message:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationRequestComplete",value:function(e,t,n){return ie("ajax:request-complete",{target:this.triggerEl,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationBeforeValidate",value:function(e,t){return ie("ajax:before-validate",{target:this.triggerEl,detail:{context:this.context,message:e,fields:t}})}},{key:"notifyApplicationBeforeReplace",value:function(e){return ie("ajax:before-replace",{target:e})}},{key:"notifyApplicationBeforeSend",value:function(){return ie("ajax:before-send",{target:window,detail:{context:this.context}})}},{key:"notifyApplicationUpdateComplete",value:function(e,t,n){return ie("ajax:update-complete",{target:window,detail:{context:this.context,data:e,responseCode:t,xhr:n}})}},{key:"notifyApplicationFieldInvalid",value:function(e,t,n,r){return ie("ajax:invalid-field",{target:window,detail:{element:e,fieldName:t,errorMsg:n,isFirst:r}})}},{key:"notifyApplicationConfirmMessage",value:function(e,t){return ie("ajax:confirm-message",{target:window,detail:{message:e,promise:t}})}},{key:"notifyApplicationErrorMessage",value:function(e){return ie("ajax:error-message",{target:window,detail:{message:e}})}},{key:"notifyApplicationCustomEvent",value:function(e,t){return ie(e,{target:this.el,detail:t})}},{key:"requestStarted",value:function(){this.markAsProgress(!0),this.toggleLoadingElement(!0),this.options.progressBar&&this.showProgressBarAfterDelay(),this.actions.invoke("start",[this.request.xhr])}},{key:"requestProgressed",value:function(e){}},{key:"requestCompletedWithResponse",value:(i=ze(Ke().m(function e(t,n){var r;return Ke().w(function(e){for(;;)switch(e.n){case 0:return r=rt(t,n,this.request.xhr),e.n=1,this.actions.invoke("success",[r,n,this.request.xhr]);case 1:return e.n=2,this.actions.invoke("complete",[r,n,this.request.xhr]);case 2:this.promise.resolve(r);case 3:return e.a(2)}},e,this)})),function(e,t){return i.apply(this,arguments)})},{key:"requestFailedWithStatusCode",value:(o=ze(Ke().m(function e(t,n){var r;return Ke().w(function(e){for(;;)switch(e.n){case 0:if(r=rt(n,t,this.request.xhr),t!=Ue){e.n=2;break}return e.n=1,this.actions.invoke("cancel",[]);case 1:e.n=3;break;case 2:return e.n=3,this.actions.invoke("error",[r,t,this.request.xhr]);case 3:return e.n=4,this.actions.invoke("complete",[r,t,this.request.xhr]);case 4:this.promise.reject(r);case 5:return e.a(2)}},e,this)})),function(e,t){return o.apply(this,arguments)})},{key:"requestFinished",value:function(){this.markAsProgress(!1),this.toggleLoadingElement(!1),this.options.progressBar&&this.hideProgressBar()}},{key:"initOtherElements",value:function(){"string"==typeof this.options.form?this.formEl=document.querySelector(this.options.form):this.options.form?this.formEl=this.options.form:this.formEl=this.el&&this.el!==document?this.el.closest("form"):null,this.triggerEl=this.formEl?this.formEl:this.el,this.partialEl=this.el&&this.el!==document?this.el.closest("[data-ajax-partial]"):null,this.loadingEl="string"==typeof this.options.loading?document.querySelector(this.options.loading):this.options.loading}},{key:"preprocessOptions",value:function(){void 0===this.options.partial&&this.partialEl&&void 0!==this.partialEl.dataset.ajaxPartial&&(this.options.partial=this.partialEl.dataset.ajaxPartial||!0)}},{key:"validateClientSideForm",value:function(){return!(this.options.browserValidate&&"function"==typeof document.createElement("input").reportValidity&&this.formEl&&!this.formEl.checkValidity()&&(this.formEl.reportValidity(),1))}},{key:"toggleLoadingElement",value:function(e){this.loadingEl&&("function"==typeof this.loadingEl.show&&"function"==typeof this.loadingEl.hide?e?this.loadingEl.show():this.loadingEl.hide():this.loadingEl.style.display=e?"block":"none")}},{key:"showProgressBarAfterDelay",value:function(){this.progressBar.setValue(0),this.progressBarTimeout=window.setTimeout(this.showProgressBar,this.options.progressBarDelay)}},{key:"hideProgressBar",value:function(){this.progressBar.setValue(100),this.progressBar.hide(),null!=this.progressBarTimeout&&(window.clearTimeout(this.progressBarTimeout),delete this.progressBarTimeout)}},{key:"markAsProgress",value:function(e){e?(document.documentElement.setAttribute("data-ajax-progress",""),this.formEl&&this.formEl.setAttribute("data-ajax-progress",this.handler)):(document.documentElement.removeAttribute("data-ajax-progress"),this.formEl&&this.formEl.removeAttribute("data-ajax-progress"))}}],r=[{key:"DEFAULTS",get:function(){return{handler:null,update:{},files:!1,bulk:!1,download:!1,browserTarget:null,browserValidate:!1,browserRedirectBack:!1,progressBarDelay:500,progressBar:null}}},{key:"send",value:function(t,n){return new e(document,t,n).start()}},{key:"sendElement",value:function(t,n,r){return"string"==typeof t&&(t=document.querySelector(t)),new e(t,n,r).start()}}],n&&tt(t.prototype,n),r&&tt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r,o,i}();function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,st(r.key),r)}}function st(e){var t=function(e,t){if("object"!=it(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=it(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==it(t)?t:t+""}window.jax||(window.jax={}),window.jax.AjaxRequest||(window.jax.AjaxRequest=ot,window.jax.AssetManager=s,window.jax.ajax=ot.send,window.jax.request||(window.jax.request=ot.sendElement));var ut=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t=e,r=[{key:"paramToObj",value:function(e,t){if(void 0===t&&(t=""),"object"===it(t))return t;"{"!==t.charAt(0)&&(t="{"+t+"}");try{return this.parseJSON(t)}catch(t){throw new Error("Error parsing the "+e+" attribute value. "+t)}}},{key:"parseJSON",value:function(t){return JSON.parse((new e).parseString(t))}}],(n=[{key:"parseString",value:function(e){if(!(e=e.trim()).length)throw new Error("Broken JSON object.");for(var t="";e&&","===e[0];)e=e.substr(1);if('"'===e[0]||"'"===e[0]){if(e[e.length-1]!==e[0])throw new Error("Invalid string JSON object.");for(var n='"',r=1;r<e.length;r++)if("\\"===e[r])"'"===e[r+1]||(n+=e[r]),n+=e[r+1],r++;else{if(e[r]===e[0])return n+='"';'"'===e[r]?n+='\\"':n+=e[r]}throw new Error("Invalid string JSON object.")}if("true"===e||"false"===e)return e;if("null"===e)return"null";var o=parseFloat(e);if(!isNaN(o))return o.toString();if("{"===e[0]){var i="needKey";for(t="{",r=1;r<e.length;r++)if(!this.isBlankChar(e[r]))if("needKey"!==i||'"'!==e[r]&&"'"!==e[r]){if("needKey"===i&&this.canBeKeyHead(e[r])){var a;t+='"',t+=a=this.parseKey(e,r),t+='"',r+=a.length-1,i="afterKey"}else if("afterKey"===i&&":"===e[r])t+=":",i=":";else if(":"===i)r=r+(n=this.getBody(e,r)).originLength-1,t+=this.parseString(n.body),i="afterBody";else if("afterBody"===i||"needKey"===i){for(var s=r;","===e[s]||this.isBlankChar(e[s]);)s++;if("}"===e[s]&&s===e.length-1){for(;","===t[t.length-1];)t=t.substr(0,t.length-1);return t+="}"}s!==r&&"{"!==t&&(t+=",",i="needKey",r=s-1)}}else t+='"'+(a=this.parseKey(e,r+1,e[r]))+'"',r+=a.length,r+=1,i="afterKey";throw new Error("Broken JSON object near "+t)}if("["===e[0]){for(t="[",i="needBody",r=1;r<e.length;r++)if(" "!==e[r]&&"\n"!==e[r]&&"\t"!==e[r])if("needBody"===i){if(","===e[r]){t+="null,";continue}if("]"===e[r]&&r===e.length-1)return","===t[t.length-1]&&(t=t.substr(0,t.length-1)),t+="]";r=r+(n=this.getBody(e,r)).originLength-1,t+=this.parseString(n.body),i="afterBody"}else if("afterBody"===i)if(","===e[r])for(t+=",",i="needBody";","===e[r+1]||this.isBlankChar(e[r+1]);)","===e[r+1]&&(t+="null,"),r++;else if("]"===e[r]&&r===e.length-1)return t+="]";throw new Error("Broken JSON array near "+t)}}},{key:"parseKey",value:function(e,t,n){for(var r="",o=t;o<e.length;o++){if(n&&n===e[o])return r;if(!n&&(" "===e[o]||":"===e[o]))return r;r+=e[o],"\\"===e[o]&&o+1<e.length&&(r+=e[o+1],o++)}throw new Error("Broken JSON syntax near "+r)}},{key:"getBody",value:function(e,t){if('"'===e[t]||"'"===e[t]){for(var n=e[t],r=t+1;r<e.length;r++)if("\\"===e[r])n+=e[r],r+1<e.length&&(n+=e[r+1]),r++;else{if(e[r]===e[t])return{originLength:(n+=e[t]).length,body:n};n+=e[r]}throw new Error("Broken JSON string body near "+n)}if("t"===e[t]){if(e.indexOf("true",t)===t)return{originLength:4,body:"true"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if("f"===e[t]){if(e.indexOf("f",t)===t)return{originLength:5,body:"false"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if("n"===e[t]){if(e.indexOf("null",t)===t)return{originLength:4,body:"null"};throw new Error("Broken JSON boolean body near "+e.substr(0,t+10))}if("-"===e[t]||"+"===e[t]||"."===e[t]||e[t]>="0"&&e[t]<="9"){for(n="",r=t;r<e.length;r++){if(!("-"===e[r]||"+"===e[r]||"."===e[r]||e[r]>="0"&&e[r]<="9"))return{originLength:n.length,body:n};n+=e[r]}throw new Error("Broken JSON number body near "+n)}if("{"===e[t]||"["===e[t]){var o=[e[t]];for(n=e[t],r=t+1;r<e.length;r++){if(n+=e[r],"\\"===e[r])r+1<e.length&&(n+=e[r+1]),r++;else if('"'===e[r])'"'===o[o.length-1]?o.pop():"'"!==o[o.length-1]&&o.push(e[r]);else if("'"===e[r])"'"===o[o.length-1]?o.pop():'"'!==o[o.length-1]&&o.push(e[r]);else if('"'!==o[o.length-1]&&"'"!==o[o.length-1])if("{"===e[r])o.push("{");else if("}"===e[r]){if("{"!==o[o.length-1])throw new Error("Broken JSON "+("{"===e[t]?"object":"array")+" body near "+n);o.pop()}else if("["===e[r])o.push("[");else if("]"===e[r]){if("["!==o[o.length-1])throw new Error("Broken JSON "+("{"===e[t]?"object":"array")+" body near "+n);o.pop()}if(!o.length)return{originLength:r-t,body:n}}throw new Error("Broken JSON "+("{"===e[t]?"object":"array")+" body near "+n)}throw new Error("Broken JSON body near "+e.substr(t-5>=0?t-5:0,50))}},{key:"canBeKeyHead",value:function(e){return"\\"!==e[0]&&(e[0]>="a"&&e[0]<="z"||e[0]>="A"&&e[0]<="Z"||"_"===e[0]||e[0]>="0"&&e[0]<="9"||"$"===e[0]||e.charCodeAt(0)>255)}},{key:"isBlankChar",value:function(e){return" "===e||"\n"===e||"\t"===e}}])&&at(t.prototype,n),r&&at(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach(function(t){dt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function dt(e,t,n){return(t=ht(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ht(r.key),r)}}function ht(e){var t=function(e,t){if("object"!=lt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lt(t)?t:t+""}var yt=function(){function e(t,n,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=r||{},this.ogElement=t,this.element=this.findElement(t),this.element?(this.assignAsEval("beforeUpdateFunc","requestBeforeUpdate"),this.assignAsEval("afterUpdateFunc","requestAfterUpdate"),this.assignAsEval("successFunc","requestSuccess"),this.assignAsEval("errorFunc","requestError"),this.assignAsEval("cancelFunc","requestCancel"),this.assignAsEval("completeFunc","requestComplete"),this.assignAsData("progressBar","requestProgressBar"),this.assignAsData("message","requestMessage"),this.assignAsData("confirm","requestConfirm"),this.assignAsData("redirect","requestRedirect"),this.assignAsData("loading","requestLoading"),this.assignAsData("form","requestForm"),this.assignAsData("url","requestUrl"),this.assignAsData("bulk","requestBulk",{emptyAsTrue:!0}),this.assignAsData("files","requestFiles",{emptyAsTrue:!0}),this.assignAsData("flash","requestFlash",{emptyAsTrue:!0}),this.assignAsData("download","requestDownload",{emptyAsTrue:!0}),this.assignAsData("update","requestUpdate",{parseJson:!0}),this.assignAsData("query","requestQuery",{emptyAsTrue:!0,parseJson:!0}),this.assignAsData("browserTarget","browserTarget"),this.assignAsData("browserValidate","browserValidate",{emptyAsTrue:!0}),this.assignAsData("browserRedirectBack","browserRedirectBack",{emptyAsTrue:!0}),this.assignAsMetaData("update","ajaxRequestUpdate",{parseJson:!0,mergeValue:!0}),this.assignRequestData(),n||(n=this.getHandlerName()),ot.sendElement(this.element,n,this.options)):ot.send(n,this.options)}return t=e,n=[{key:"findElement",value:function(e){if(!e||e===document)return null;if(e.matches("[data-request]"))return e;var t=e.closest("[data-request]");return t||e}},{key:"getHandlerName",value:function(){return this.element.dataset.dataRequest?this.element.dataset.dataRequest:this.element.getAttribute("data-request")}},{key:"assignAsEval",value:function(e,t){var n;void 0===this.options[e]&&(n=this.element.dataset[t]?this.element.dataset[t]:this.element.getAttribute("data-"+vt(t)))&&(this.options[e]=function(e,t){return new Function("data",n).apply(e,[t])})}},{key:"assignAsData",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.parseJson,i=void 0!==o&&o,a=r.emptyAsTrue,s=void 0!==a&&a;void 0===this.options[e]&&null!==(n=this.element.dataset[t]?this.element.dataset[t]:this.element.getAttribute("data-"+vt(t)))&&(n=this.castAttrToOption(n,s),i&&"string"==typeof n&&(n=ut.paramToObj("data-"+vt(t),n)),this.options[e]=n)}},{key:"assignAsMetaData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.mergeValue,o=void 0===r||r,i=n.parseJson,a=void 0!==i&&i,s=n.emptyAsTrue,u=void 0!==s&&s,l=document.documentElement.querySelector('head meta[name="'+vt(t)+'"]');if(l){var c=l.getAttribute("content");c=a?ut.paramToObj(vt(t),c):this.castAttrToOption(c,u),this.options[e]=o?ft(ft({},this.options[e]||{}),c):c}}},{key:"castAttrToOption",value:function(e,t){return!(!t||""!==e)||"true"===e||"1"===e||"false"!==e&&"0"!==e&&e}},{key:"assignRequestData",value:function(){var e={};this.options.data&&Object.assign(e,this.options.data);var t=this.ogElement.getAttribute("data-request-data");t&&Object.assign(e,ut.paramToObj("data-request-data",t)),function(e,t){var n=[];if(!e.parentNode)return n;for(var r=e.parentNode.closest(t);r;)n.push(r),r=r.parentNode.closest(t);return n}(this.ogElement,"[data-request-data]").reverse().forEach(function(t){Object.assign(e,ut.paramToObj("data-request-data",t.getAttribute("data-request-data")))}),this.options.data=e}}],r=[{key:"fromElement",value:function(t,n,r){return"string"==typeof t&&(t=document.querySelector(t)),new e(t,n,r)}}],n&&pt(t.prototype,n),r&&pt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();function vt(e){return e.replace(/[A-Z]/g,function(e){return"-".concat(e.toLowerCase())})}function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gt(r.key),r)}}function gt(e){var t=function(e,t){if("object"!=mt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mt(t)?t:t+""}var wt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.started=!1,this.documentVisible=!0},(t=[{key:"start",value:function(){var e=this;this.started||(window.onbeforeunload=this.documentOnBeforeUnload,addEventListener("DOMContentLoaded",function(){return e.render()}),addEventListener("page:updated",function(){return e.render()}),addEventListener("ajax:update-complete",function(){return e.render()}),addEventListener("visibilitychange",function(){return e.documentOnVisibilityChange()}),je.on(document,"submit","[data-request]",this.documentOnSubmit),je.on(document,"input","input[data-request][data-track-input]",this.documentOnKeyup),je.on(document,"change","select[data-request], input[type=radio][data-request], input[type=checkbox][data-request], input[type=file][data-request]",this.documentOnChange),je.on(document,"keydown","input[type=text][data-request], input[type=submit][data-request], input[type=password][data-request]",this.documentOnKeydown),je.on(document,"click","a[data-request], button[data-request], input[type=button][data-request], input[type=submit][data-request]",this.documentOnClick),this.started=!0)}},{key:"stop",value:function(){this.started&&(this.started=!1)}},{key:"render",value:function(e){je.dispatch("before-render"),je.dispatch("render"),dispatchEvent(new Event("resize")),this.documentOnRender(e)}},{key:"documentOnVisibilityChange",value:function(e){this.documentVisible=!document.hidden,this.documentVisible&&this.documentOnRender()}},{key:"documentOnRender",value:function(e){this.documentVisible&&document.querySelectorAll("[data-auto-submit]").forEach(function(e){var t=e.dataset.autoSubmit||0;e.removeAttribute("data-auto-submit"),setTimeout(function(){yt.fromElement(e)},t)})}},{key:"documentOnSubmit",value:function(e){e.preventDefault(),yt.fromElement(e.target)}},{key:"documentOnClick",value:function(e){e.preventDefault(),yt.fromElement(e.target)}},{key:"documentOnChange",value:function(e){yt.fromElement(e.target)}},{key:"documentOnKeyup",value:function(e){var t=e.target,n=t.dataset.ocLastValue;if(-1!==["email","number","password","search","text"].indexOf(t.type)&&(void 0===n||n!=t.value)){t.dataset.ocLastValue=t.value,void 0!==this.dataTrackInputTimer&&clearTimeout(this.dataTrackInputTimer);var r=t.getAttribute("data-track-input");r||(r=300);var o=this;this.dataTrackInputTimer=setTimeout(function(){o.lastDataTrackInputRequest&&o.lastDataTrackInputRequest.abort(),o.lastDataTrackInputRequest=yt.fromElement(t)},r)}}},{key:"documentOnKeydown",value:function(e){"Enter"===e.key&&(e.preventDefault(),void 0!==this.dataTrackInputTimer&&clearTimeout(this.dataTrackInputTimer),yt.fromElement(e.target))}},{key:"documentOnBeforeUnload",value:function(e){window.jaxUnloading=!0}}])&&bt(e.prototype,t),n&&bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,St(r.key),r)}}function St(e){var t=function(e,t){if("object"!=jt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jt(t)?t:t+""}var xt=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"bind",value:function(){this.bindRequestFunc(),this.bindRenderFunc(),this.bindjQueryEvents()}},{key:"bindRequestFunc",value:function(){var e=$.fn.request;$.fn.request=function(e,t){var n="object"===jt(t)?t:{};return new yt(this.get(0),e,n)},$.fn.request.Constructor=yt,$.request=function(e,t){return $(document).request(e,t)},$.fn.request.noConflict=function(){return $.fn.request=e,this}}},{key:"bindRenderFunc",value:function(){$.fn.render=function(e){$(document).on("render",e)}}},{key:"bindjQueryEvents",value:function(){this.migratejQueryEvent(document,"ajax:setup","ajaxSetup",["context"]),this.migratejQueryEvent(document,"ajax:promise","ajaxPromise",["context"]),this.migratejQueryEvent(document,"ajax:fail","ajaxFail",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:done","ajaxDone",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:always","ajaxAlways",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:before-redirect","ajaxRedirect"),this.migratejQueryEvent(document,"ajax:update","ajaxUpdate",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:before-replace","ajaxBeforeReplace"),this.migratejQueryEvent(document,"ajax:before-request","oc.beforeRequest",["context"]),this.migratejQueryEvent(document,"ajax:before-update","ajaxBeforeUpdate",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:request-success","ajaxSuccess",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:request-complete","ajaxComplete",["context","data","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:request-error","ajaxError",["context","message","responseCode","xhr"]),this.migratejQueryEvent(document,"ajax:before-validate","ajaxValidation",["context","message","fields"]),this.migratejQueryEvent(window,"ajax:before-send","ajaxBeforeSend",["context"]),this.migratejQueryEvent(window,"ajax:update-complete","ajaxUpdateComplete",["context","data","responseCode","xhr"]),this.migratejQueryEvent(window,"ajax:invalid-field","ajaxInvalidField",["element","fieldName","errorMsg","isFirst"]),this.migratejQueryEvent(window,"ajax:confirm-message","ajaxConfirmMessage",["message","promise"]),this.migratejQueryEvent(window,"ajax:error-message","ajaxErrorMessage",["message"]),this.migratejQueryAttachData(document,"ajax:setup","a[data-request], button[data-request], form[data-request], a[data-handler], button[data-handler]")}},{key:"migratejQueryEvent",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=this;$(e).on(t,function(e){o.triggerjQueryEvent(e.originalEvent,n,r)})}},{key:"triggerjQueryEvent",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=$.Event(t),o=this.buildDetailArgs(e,n);$(e.target).trigger(r,o),r.isDefaultPrevented()&&e.preventDefault()}},{key:"buildDetailArgs",value:function(e,t){var n=[];return t.forEach(function(t){n.push(e.detail[t])}),n}},{key:"migratejQueryAttachData",value:function(e,t,n){$(e).on(t,n,function(e){var t=$(this).data("request-data");if(t){var n=e.detail.context.options;t.constructor==={}.constructor?Object.assign(n.data,t):"string"==typeof t&&Object.assign(n.data,ut.paramToObj("request-data",t))}})}}],t&&kt(e.prototype,t),n&&kt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Et=new wt;const Ot={controller:Et,parseJSON:ut.parseJSON,serializeJSON:ee.serializeJSON,requestElement:yt.fromElement,start:function(){Et.start(),window.jQuery&&(new xt).bind()},stop:function(){Et.stop()}};function At(e){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(e)}window.jax||(window.jax={}),window.jax.AjaxFramework||(window.jax.AjaxFramework=Ot,window.jax.request=Ot.requestElement,window.jax.parseJSON=Ot.parseJSON,window.jax.serializeJSON=Ot.serializeJSON,window.jax.Events=je,window.jax.waitFor=function(e,t){return new Promise(function(n,r){var o=function(){e()&&(clearInterval(i),n())},i=setInterval(o,100);o(),t&&setTimeout(function(){clearInterval(i),r()},t)})},window.jax.pageReady=function(){return new Promise(function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){return e()}):e()})},window.jax.visit=function(e){return window.location.assign(e)},"function"==typeof define&&e.amdO||"object"==("undefined"==typeof exports?"undefined":At(exports))||Ot.start())})();